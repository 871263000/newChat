webpackJsonp([7],[,,,function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i=t(10),s=function(e){return e=e.replace(/\n/g,"&lbrg").replace(/\t/g," ")},a=function(e){if(e)return e=e.replace(/&lbrg/g,"<br>").replace(/face\[([^\s\[\]]+?)\]/g,function(e){var n=e.replace(/^face/g,"");return'<img alt="'+n+'" title="'+n+'" src="'+faces[n]+'">'}).replace(/【(.*?)】/g,function(e,n){var t=i.a.find(function(e){return e.name==n});return'<img width="20px"  src="/chatStatic/emoji/'+t.num+'@2x.png" alt="'+t.name+'" />'}).replace(/-(file|img)-\[(.*?)\]/g,function(e,n,t){var i="",s=t.split("|");return t[1]&&(i="img"==n?'<img style="max-width: 200px;" class="chat-img" src="'+s[1]+'" alt="'+s[0]+'" />':'<div class="chat-file"><a title="'+s[0]+'" href="'+s[1]+'" download target="_blank"><i class="iconfont-chat">&#xe662;</i><p title="'+s[0]+'">'+s[0]+"</p></a></div>"),i})};n.b=s},,,,,,,function(e,n,t){"use strict";var i=[{dh:"weiXiao",name:"微笑",num:"001"},{dh:"pieZui",name:"撇嘴",num:"002"},{dh:"se",name:"色",num:"003"},{dh:"faDai",name:"发呆",num:"004"},{dh:"deYi",name:"得意",num:"005"},{dh:"liuLei",name:"流泪",num:"006"},{dh:"haiXiu",name:"害羞",num:"007"},{dh:"biZui",name:"闭嘴",num:"008"},{dh:"shui",name:"睡",num:"009"},{dh:"daKu",name:"大哭",num:"010"},{dh:"ganGa",name:"尴尬",num:"011"},{dh:"faNu",name:"发怒",num:"012"},{dh:"tiaoPi",name:"调皮",num:"013"},{dh:"ciYa",name:"呲牙",num:"014"},{dh:"jingYa",name:"惊讶",num:"015"},{dh:"nanGuo",name:"难过",num:"016"},{dh:"ku",name:"酷",num:"017"},{dh:"jiong",name:"囧",num:"018"},{dh:"zhuaKuang",name:"抓狂",num:"019"},{dh:"tu",name:"吐",num:"020"},{dh:"touXiao",name:"偷笑",num:"021"},{dh:"keAi",name:"可爱",num:"022"},{dh:"baiYan",name:"白眼",num:"023"},{dh:"aoMan",name:"傲慢",num:"024"},{dh:"jiE",name:"饥饿",num:"025"},{dh:"kun",name:"困",num:"026"},{dh:"jingKong",name:"惊恐",num:"027"},{dh:"liuHan",name:"流汗",num:"028"},{dh:"hanXiao",name:"憨笑",num:"029"},{dh:"youXian",name:"悠闲",num:"030"},{dh:"fenDou",name:"奋斗",num:"031"},{dh:"zhouMa",name:"咒骂",num:"032"},{dh:"yiWen",name:"疑问",num:"033"},{dh:"xu",name:"嘘",num:"034"},{dh:"yun",name:"晕",num:"035"},{dh:"fengLe",name:"疯了",num:"036"},{dh:"shuai",name:"衰",num:"037"},{dh:"kuLou",name:"骷髅",num:"038"},{dh:"qiaoDa",name:"敲打",num:"039"},{dh:"zaiJian",name:"再见",num:"040"},{dh:"caHan",name:"擦汗",num:"041"},{dh:"kouBi",name:"抠鼻",num:"042"},{dh:"guZhang",name:"鼓掌",num:"043"},{dh:"qiuDaLe",name:"糗大了",num:"044"},{dh:"huaiXiao",name:"坏笑",num:"045"},{dh:"zuoHengHeng",name:"左哼哼",num:"046"},{dh:"youHengHeng",name:"右哼哼",num:"047"},{dh:"haQian",name:"哈欠",num:"048"},{dh:"bishi",name:"鄙视",num:"049"},{dh:"weiQu",name:"委屈",num:"050"},{dh:"kuaiKu",name:"快哭",num:"051"},{dh:"yinXian",name:"阴险",num:"052"},{dh:"qinQin",name:"亲亲",num:"053"},{dh:"xia",name:"吓",num:"054"},{dh:"keLian",name:"可怜",num:"055"},{dh:"caiDao",name:"菜刀",num:"056"},{dh:"xiGua",name:"西瓜",num:"057"},{dh:"piJiu",name:"啤酒",num:"058"},{dh:"lanQiu",name:"篮球",num:"059"},{dh:"pingPa",name:"乒乓",num:"060"},{dh:"kaFei",name:"咖啡",num:"061"},{dh:"fan",name:"饭",num:"062"},{dh:"zhuTou",name:"猪头",num:"063"},{dh:"meiGui",name:"玫瑰",num:"064"},{dh:"diaoXie",name:"凋谢",num:"065"},{dh:"zuiChun",name:"嘴唇",num:"066"},{dh:"aiXin",name:"爱心",num:"067"},{dh:"xinSui",name:"心碎",num:"068"},{dh:"danGao",name:"蛋糕",num:"069"},{dh:"shanDian",name:"闪电",num:"070"},{dh:"zhaDan",name:"炸弹",num:"071"},{dh:"dao",name:"刀",num:"072"},{dh:"zouqiu",name:"足球",num:"073"},{dh:"piaoChong",name:"瓢虫",num:"074"},{dh:"bianBian",name:"便便",num:"075"},{dh:"yueLiang",name:"月亮",num:"076"},{dh:"taiYan",name:"太阳",num:"077"},{dh:"liWu",name:"礼物",num:"078"},{dh:"baoBao",name:"抱抱",num:"079"},{dh:"qiang",name:"强",num:"080"},{dh:"ruo",name:"弱",num:"081"},{dh:"woshou",name:"握手",num:"082"},{dh:"shengLi",name:"胜利",num:"083"},{dh:"baoQuan",name:"抱拳",num:"084"},{dh:"gouYin",name:"勾引",num:"085"},{dh:"quanTou",name:"拳头",num:"086"},{dh:"chaJin",name:"差劲",num:"087"},{dh:"aiNi",name:"爱你",num:"088"},{dh:"NO",name:"NO",num:"089"},{dh:"OK",name:"OK",num:"090"},{dh:"aiQing",name:"爱情",num:"091"},{dh:"feiWen",name:"飞吻",num:"092"},{dh:"tiaoTiao",name:"跳跳",num:"093"},{dh:"faDou",name:"发抖",num:"094"},{dh:"ouHuo",name:"怄火",num:"095"},{dh:"zhuanQuan",name:"转圈",num:"096"},{dh:"keTou",name:"磕头",num:"097"},{dh:"huiTou",name:"回头",num:"098"},{dh:"tiaoSheng",name:"跳绳",num:"099"},{dh:"jiDong",name:"激动",num:"100"},{dh:"lunWu",name:"乱舞",num:"101"},{dh:"xianWen",name:"献吻",num:"102"},{dh:"youTaiJi",name:"左太极",num:"103"},{dh:"touXiang",name:"投降",num:"104"}];n.a=i},function(e,n,t){"use strict";var i=function(e,n){if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=n,sel.select();else if(e.selectionStart||"0"==e.selectionStart){var t=e.selectionStart,i=e.selectionEnd,s=e.scrollTop;e.value=e.value.substring(0,t)+n+e.value.substring(i,e.value.length),s>0&&(e.scrollTop=s),e.focus(),e.selectionStart=t+n.length,e.selectionEnd=t+n.length}else e.value+=n,e.focus()};n.a=i},function(e,n,t){"use strict";t.d(n,"b",function(){return i});var i=function(e,n){var t=e.getAsFile(),i=new FileReader;i.onload=function(e){n({src:e.target.result})},i.readAsDataURL(t)},s=function(e){var n,t,i,s=e.clipboardData,a=0;if(!s.items)return insertHtmlAtCaret(s.getData("text/plain"),!0),!1;if(s){if(!(n=s.items))return;for(t=n[0],i=s.types||[];a<i.length;a++)if("Files"===i[a]){t=n[a];break}if(t&&"string"===t.kind)return!1;if(t&&"file"===t.kind&&t.type.match(/^image\//i))return e.preventDefault(),{value:t}}};n.a=s},,,,,function(e,n,t){"use strict";var i=t(4),s=t.n(i),a=t(0),o=t(1),r=t(29),c=t(3),u=t(34);a.a.use(o.a);var m=(new Date,new o.a.Store({state:{user:{},friends:[{groupname:"全员",id:1,list:[]},{groupname:"好友",id:2,list:[]}],group:[],sessions:[],indexTab:1,currentSession:{id:"",name:"",img:""},currentSessionType:"message",filterKey:"",searchFriend:[],userSet:{voice:0,desktop:0},iPhone:!1},mutations:{INIT_DATA:function(e,n){(function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!1,i=0;i<n.length;i++)if(e.indexOf(n[i])>0){t=!0;break}return t})()&&(e.iPhone=!0),e.user.id=n.data.mine.id,e.user.name=n.data.mine.username,e.user.omsId=n.data.mine.oms_id,e.user.img=n.data.mine.avatar?n.data.mine.avatar:"/chat/images/niming.png",e.friends=n.data.friend,e.group=n.data.group;var t=localStorage.getItem("vue-chat-session"+e.user.id),i=localStorage.getItem("chat-set"),s=[],a="all"+e.user.omsId;if(t){if(s=JSON.parse(t),s.forEach(function(e,n){"all"==e.id&&s.splice(n,1)}),!s.find(function(e){return e.id==a})){var o=new Date;s.unshift({id:a,user:{name:"全员群",img:"/chat/images/ren.png"},messageNum:0,type:"groupMessage",messages:[{id:"5057",content:"所有人的群",img:"/chat/images/ren.png",name:"系统",date:o}]})}}else{var r=new Date;s.push({id:a,user:{name:"全员群",img:"/chat/images/ren.png"},messageNum:0,type:"groupMessage",messages:[{id:"5057",content:"所有人的群",img:"/chat/images/ren.png",name:"系统",date:r}]})}e.sessions=s,i&&(e.userSet=JSON.parse(i))},SEND_MESSAGE:function(e,n){var i=e.sessions,s=e.currentSession,a=e.user;e.friends,e.currentSessionType;if(0==n.code)return"groupMessage"==n.type&&i.forEach(function(e,t){e.id==n.dialogueId&&i.splice(t,1)}),alert(n.msg),!1;var o={},r=i.find(function(e){return e.id==n.dialogueId&&e.type===n.type});if(n.content=t.i(c.a)(n.content),n.senderId==a.id)o={id:n.id,content:n.content,date:new Date,self:!0};else{var u="";n.date&&(u=new Date(1e3*n.date)),o={id:n.id,name:n.name,img:n.img,content:n.content,date:u||new Date}}if(r){n.dialogueId!=s.id&&r.messageNum++,r.messages.length>20&&r.messages.shift(),r.messages.push(o);var m=0;for(var l in i)if(i[l].id==n.dialogueId&&i[l].type===n.type){m=l;break}0!=m&&i.unshift(i.splice(m,1)[0])}else r={id:n.dialogueId,user:{name:n.sessionName,img:n.sessionImg},messageNum:0,type:n.type,messages:[]},n.dialogueId!=s.id&&r.messageNum++,r.messages.push(o),i.unshift(r)},SELECT_SESSION:function(e,n){var t=e.sessions.find(function(e){return e.id==n.id&&e.type==n.type});t&&0!=t.messageNum&&r.a.sendMessage({type:"mes_close",to_uid:n.id,session_no:n.id,message_type:n.type}),t&&0!=t.messageNum&&(t.messageNum=0),e.currentSession.id=n.id,e.currentSession.name=n.name,e.currentSession.img=n.img,e.currentSessionType=n.type},DELSESSION:function(e,n){e.sessions.splice(n,1)},SELECT_TAB:function(e,n){e.indexTab=n},SET_FILTER_KEY:function(e,n){e.filterKey=n},USER_SET:function(e,n,t){console.log(e.userSet)},CLEAR_SESSION:function(e){e.currentSession.id="",e.currentSession.name="",e.currentSession.img=""},FRIEND_DEL:function(e,n){for(var t in e.friends[0].list)if(e.friends[0].list[t].id==n){e.friends[0].list.splice(t,1);break}},FRIENDS_STATE_CHANGE:function(e,n){for(var t in e.friends[0].list)if(e.friends[0].list[t].id==n){e.friends[0].list[t].state=0;break}}},actions:{initData:function(e,n){var t=e.commit,i=e.dispatch;r.a.on("open",function(){r.a.sendMessage({type:"login",oms_id:n.data.mine.oms_id,uid:n.data.mine.id,header_img_url:n.data.mine.avatar,token:n.data.mine.token,client_name:n.data.mine.username,room_id:n.data.mine.oms_id})}),r.a.on("comeMessage",function(e){var n=e.type;i(n,e)}),r.a.connect(),t("INIT_DATA",n)},sendMessage:function(e,n){var i=(e.commit,e.state),s={};n.dialogueId=i.currentSession.id,n.senderId=i.user.id,n.name=i.currentSession.name,n.img=i.currentSession.img,n.type=i.currentSessionType,n.content=t.i(c.b)(n.content),s={type:"sayUid",to_uid:i.currentSession.id,groupId:0,accept_name:i.currentSession.name,message_type:i.currentSessionType,mes_types:"text",content:n.content},"message"!=i.currentSessionType&&(s.session_no=i.currentSession.id),r.a.sendMessage(s)},acceptMes:function(e,n){var t=e.commit,i=e.state,s=void 0,a=void 0,o=void 0,r=void 0,c=void 0,u=void 0;return n&&n.forEach(function(e){"message"==e.message_type?(r=e.sender_name,a=e.sender_name,c=e.chat_header_img,u=e.chat_header_img,o=e.sender_id):(c=e.chat_header_img,u="/chat/images/ren.png",r=e.accept_name,a=e.sender_name,o=e.session_no);var n=i.sessions.find(function(n){return n.id==o&&n.type===e.message_type});if(n){if(n.messages.find(function(n){return n.id==e.id}))return!1}s={id:e.id,content:e.message_content,senderId:e.sender_id,dialogueId:o,name:a,sessionName:r,sessionImg:u,img:c,type:e.message_type,date:e.create_time},s.code=1,t("SEND_MESSAGE",s)}),!1},selectSession:function(e,n){(0,e.commit)("SELECT_SESSION",n)},delSession:function(e,n){(0,e.commit)("DELSESSION",n)},selectTab:function(e,n){return(0,e.commit)("SELECT_TAB",n)},search:function(e,n){return(0,e.commit)("SET_FILTER_KEY",n)},userSet:function(e,n,t){return(0,e.commit)("USER_SET",n,t)},clearSession:function(e){return(0,e.commit)("CLEAR_SESSION")},friendDel:function(e,n){return(0,e.commit)("FRIEND_DEL",n)},friendsStateChange:function(e,n){return(0,e.commit)("FRIENDS_STATE_CHANGE",n)}},modules:{events:u.a}}));m.watch(function(e){return e.sessions},function(e){var n=m.state.user.id;localStorage.setItem("vue-chat-session"+n,s()(e))},{deep:!0}),m.watch(function(e){return e.currentSession},function(e){var n=e.id;n||(n=0);var t={type:"selectSession",dialogueId:n};r.a.sendMessage(t)},{deep:!0}),n.a=m},function(e,n,t){t(65),t(66);var i=t(2)(t(22),t(86),"data-v-22a805ff",null);e.exports=i.exports},,,,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),s=t(1),a=t(19),o=t(80),r=t.n(o),c=t(83),u=t.n(c),m=t(82),l=t.n(m),d=t(85),f=t.n(d),h=t(84),g=t.n(h);t(64),i.a.use(a.a),n.default={name:"app",components:{Card:r.a,menuList:u.a,List:l.a,Message:g.a,TextAre:f.a},computed:t.i(s.b)({complete:function(e){return e.events.complete},mesNum:function(e){var n=0;return e.sessions.forEach(function(e){n+=e.messageNum}),n}}),data:function(){return{chatMainShow:!1,iPhone:!1,mainShow:!1}},mounted:function(){var e=this;(function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!1,i=0;i<n.length;i++)if(e.indexOf(n[i])>0){t=!0;break}return t})()&&(this.iPhone=!0,this.mainShow=!0),document.onkeydown=function(n){27==n.keyCode&&(e.chatMainShow=!e.chatMainShow)},this.$http.get("/omsIm/demo/json/getList.php").then(function(n){e.$store.dispatch("initData",n.data),e.$http.get("/omsIm/demo/json/getList.php?class=mesNum").then(function(n){e.$store.dispatch("acceptMes",n.data.reverse())}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},methods:{transf:function(){}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),s=t(1);i.a.component("onlineMan",function(e){t.e(5).then(function(){var n=[t(102)];e.apply(null,n)}.bind(this)).catch(t.oe)}),n.default={data:function(){return{onlineShow:!1}},computed:t.i(s.b)({user:function(e){return e.user},filterKey:function(e){return e.filterKey},online:function(e){return e.events.onlineMan}}),methods:{onKeyup:function(e){this.$store.dispatch("search",e.target.value)},onlineShowFun:function(){this.onlineShow=!this.onlineShow}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(20),s=t.n(i),a=(t(0),t(1));n.default={name:"friend-list",data:function(){return{openFun:!1}},props:["item"],computed:s()({newFriendNum:function(){var e=0;for(var n in this.item.list)1==this.item.list[n].state&&e++;return e}},t.i(a.b)({currentId:function(e){return e.currentSession.id}})),methods:{open:function(){this.openFun=!this.openFun},selectSession:function(e,n,t,i,s,a){if(1==s)return this.$emit("friendsApple",a.id,a.state),!1;this.$emit("fmainShow");var o={id:e,type:n,name:t,img:i};this.$store.dispatch("selectSession",o)}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),s=t(1),a=t(81),o=t.n(a),r=t(31);t.i(r.a)(i.a),i.a.component("friendApply",function(e){t.e(2).then(function(){var n=[t(100)];e.apply(null,n)}.bind(this)).catch(t.oe)}),n.default={data:function(){return{mousedownShow:!1,mousedowInfo:{id:1,index:1},friendApplyShow:!1,friendApplyId:0,friendsApplyState:0}},components:{friendsList:o.a},methods:{selectSession:function(e,n,t,i){this.$emit("mainShow");var s={id:e,type:n,name:t,img:i};this.$store.dispatch("selectSession",s)},searchSelectSession:function(e,n,t,i,s){if("新好友"==s)return this.friendApplyShow=!0,this.friendApplyId=uid,void(this.friendsApplyState=state);this.$emit("mainShow");var a={id:e,type:n,name:t,img:i};console.log(a),this.$store.dispatch("selectSession",a)},mousedown:function(e,n,t){var i=this;3==t.which&&(this.mousedownShow=!0,this.$nextTick(function(){i.$refs.recentContactsDel.style.top=t.pageY+2+"px",i.$refs.recentContactsDel.style.left=t.pageX+2+"px"}),this.mousedowInfo.id=e.id,this.mousedowInfo.index=n)},removeZjlxr:function(){this.$store.dispatch("delSession",this.mousedowInfo.index)},open:function(e){var n=this.$refs.group[e].style,t=this.$refs.group[e].style.display;n.display="none"==t?"block":"none"},friendApply:function(e,n){this.friendApplyShow=!0,this.friendApplyId=e,this.friendsApplyState=n}},filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),e.getHours()+":"+e.getMinutes()},content:function(e){return e?(e=e.replace(/<img.*?(?:>|\/>)/gi,function(e){return e.includes("20px")?"【表情】":"【图片】"}),e=e.replace(/<div.*\>/gi,function(e){return"【文件】"})):""}},computed:t.i(s.b)({currentId:function(e){return e.currentSession.id},currentType:function(e){return e.currentSessionType},sessions:function(e){return e.sessions},searchFriend:function(e){if(""==e.filterKey)return[];var n=[],t={};for(var i in e.friends)t={},e.friends[i].list&&(t.list=e.friends[i].list.filter(function(n){return n.username.includes(e.filterKey)}),t.name=e.friends[i].groupname,n.push(t));return n},searchGroup:function(e){return""==e.filterKey?[]:e.group.filter(function(n){return n.groupname.includes(e.filterKey)})},indexTab:function(e){return e.indexTab},friends:function(e){return e.friends},group:function(e){return e.group},filterKey:function(e){return e.filterKey},user:function(e){return e.user}}),created:function(){var e=this;document.addEventListener("click",function(n){e.mousedownShow&&(e.mousedownShow=!e.mousedownShow)})}},i.a.directive("oncontextmenu",{bind:function(e){e.oncontextmenu=function(){return!1}}})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(4),s=t.n(i),a=t(1);n.default={data:function(){return{selfInfo:!1,setShow:!1,sets:{voice:["开启声音","关闭声音"],desktop:["开启桌面通知","关闭桌面通知"]}}},computed:t.i(a.b)({user:function(e){return e.user},filterKey:function(e){return e.filterKey},indexTab:function(e){return e.indexTab},userSet:function(e){return e.userSet},newFriendNum:function(e){var n=0;for(var t in e.friends[0].list)1==e.friends[0].list[t].state&&n++;return n}}),methods:{selectTab:function(e){this.$store.dispatch("selectTab",e)},showInfo:function(e){this.selfInfo=!this.selfInfo},setUser:function(e){var n=this.userSet;n[e]=0==n[e]?1:0,this.$store.dispatch("userSet",e,n[e]),localStorage.setItem("chat-set",s()(n))}},created:function(){var e=this;document.addEventListener("click",function(n){e.selfInfo&&(e.selfInfo=!e.selfInfo),e.setShow&&(e.setShow=!e.setShow)})}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),s=t(0),a=t(11),o=t(3);s.a.component("messagesLog",function(e){t.e(0).then(function(){var n=[t(21)];e.apply(null,n)}.bind(this)).catch(t.oe)}),s.a.component("imgFd",function(e){t.e(1).then(function(){var n=[t(99)];e.apply(null,n)}.bind(this)).catch(t.oe)}),s.a.component("persInfo",function(e){t.e(3).then(function(){var n=[t(103)];e.apply(null,n)}.bind(this)).catch(t.oe)}),s.a.component("groupMan",function(e){t.e(6).then(function(){var n=[t(101)];e.apply(null,n)}.bind(this)).catch(t.oe)}),n.default={data:function(){return{showMessageLog:!1,showImg:!1,imgfdBoxinfo:"",persInfo:!1,groupManShow:!1}},computed:t.i(i.b)({user:function(e){return e.user},session:function(e){return e.sessions.find(function(n){return n.id===e.currentSession.id})},dialogName:function(e){return e.currentSession.name},dialogId:function(e){return e.currentSession.id},dialogType:function(e){return e.currentSessionType},iPhone:function(e){return e.iPhone}}),filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),e.getFullYear()+"-"+(parseInt(e.getMonth())+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},methods:{content:function(e){return t.i(o.a)(e)},imgFd:function(e){if("IMG"==e.target.nodeName){var n=e.target.src;this.imgfdBoxinfo=n,this.showImg=!0}},clearSession:function(){this.$emit("mainShow"),this.$store.dispatch("clearSession")},userInfo:function(){var e=this;if("groupMessage"==this.dialogType)return this.$nextTick(function(){document.addEventListener("click",function(n){e.groupManShow=!1})}),this.groupManShow=!this.groupManShow,!1;this.persInfo=!0},appoint:function(e){"message"!=this.dialogType&&e&&(this.iPhone?t.i(a.a)(document.getElementById("chat-input"),"@"+e+"  "):t.i(a.a)(document.getElementsByTagName("textarea")[0],"@"+e+"  "))}}},s.a.directive("chat-drop",{bind:function(e){s.a.nextTick(function(){var n=document.getElementById("chat-main");e.onmousedown=function(e){var e=e||window.event,t=n.offsetWidth/2,i=e.clientX-n.offsetLeft-t,s=e.clientY-n.offsetTop;document.onmousemove=function(e){var e=e||window.event;n.style.left=e.clientX-i+"px",n.style.top=e.clientY-s+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}})}}),s.a.directive("scroll-bottom",function(e){s.a.nextTick(function(){for(var n=e.getElementsByTagName("img"),t=0,i=0,s=0;s<=n.length-1;s++)"chat-img"==n[s].getAttribute("class")&&(t++,n[s].onload=function(){a()});var a=function(){++i==t&&(e.scrollTop=e.scrollHeight-e.clientHeight)};e.scrollTop=e.scrollHeight-e.clientHeight})})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),s=t(0),a=t(11),o=t(30),r=t(10),c=t(12);s.a.component("messagesLog",function(e){t.e(0).then(function(){var n=[t(21)];e.apply(null,n)}.bind(this)).catch(t.oe)}),s.a.component("sendImg",function(e){t.e(4).then(function(){var n=[t(104)];e.apply(null,n)}.bind(this)).catch(t.oe)}),n.default={data:function(){return{content:"",selShow:!1,currentSel:1,emShow:!1,emojis:r.a,showMessageLog:!1,iphoneText:!1,sendImgShow:!1,sendImgSrcU:""}},computed:t.i(i.b)({start:function(e){return e.currentSession.id},user:function(e){return e.user}}),methods:{onKeydown:function(e){var n=this.$refs.textarea.value;if(0==this.currentSel)e.ctrlKey&&13===e.keyCode&&n&&this.send();else{if(e.shiftKey||e.ctrlKey)return;e.preventDefault(),13===e.keyCode&&n.length&&this.send()}},send:function(){var e=this.$refs.textarea.value;if(!e)return!1;var n={content:e};e="",this.content="",this.$store.dispatch("sendMessage",n)},changeSend:function(e){this.currentSel=e,localStorage.setItem("currentSel",e)},emojiInsert:function(e){t.i(a.a)(this.$refs.textarea,"【"+e.name+"】"),this.content=this.$refs.textarea.value},fileUpload:function(e){var n="",t=this,i="";if(void 0===(n=void 0===e.target?e[0]:e.target.files[0]))return!1;i=/image\/\w+/.test(n.type)?"img":"file";var s=(Math.floor(n.size/1024),n.name),a=(new Date).getTime(),r=this.user.id,c=this.start;o.a.Qiniu_upload({key:"/file/"+r+"/"+c+"/"+a+"/"+s,tokenurl:"/chat/uptoken.php",f:n,QiniuUrl:"http://up.qiniu.com"},function(e){if(!e.error){var n="";n="file"==i?{content:"-file-["+e.fname+"|http://7xq4o9.com1.z0.glb.clouddn.com/"+e.key+"]"}:{content:"-img-["+e.fname+"|http://7xq4o9.com1.z0.glb.clouddn.com/"+e.key+"]"},t.$store.dispatch("sendMessage",{content:n.content})}})},pasteOver:function(e){var n=this,i=t.i(c.a)(e),s="";i&&(s=i.value,t.i(c.b)(s,function(e){var t=e.src,i=void 0,s=void 0,a=t.substring(22);s=t.substring(22);var r=a.indexOf("=");(new Date).getTime(),n.user.id,n.start;s.indexOf("=")>0&&(s=a.substring(0,r));var c=s.length,c=parseInt(c-c/8*2),u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],m=function(e){for(var n="",t=0;t<e;t++){var i=Math.ceil(35*Math.random());n+=u[i]}return n}(10);i="putb64/"+c+"/"+m+".png",o.a.getQiniuToken("/chat/uptoken.php",function(e){n.uploadBase64(a,e,i,function(e){n.sendImgSrcU=e.key,n.sendImgShow=!0})})}))},uploadBase64:function(e,n,t,i){var s="http://upload.qiniu.com/"+t,a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&i(JSON.parse(a.responseText))},a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/octet-stream"),a.setRequestHeader("Authorization","UpToken "+n),a.send(e)},dropFile:function(e){e.preventDefault();var n=e.dataTransfer.files;if(0==n.length)return!1;this.fileUpload(n)}},created:function(){var e=this;(function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!1,i=0;i<n.length;i++)if(e.indexOf(n[i])>0){t=!0;break}return t})()&&(this.iphoneText=!0);var n=localStorage.getItem("currentSel");this.$nextTick(function(){document.addEventListener("click",function(n){e.emShow&&(e.emShow=!e.emShow),e.selShow&&(e.selShow=!e.selShow)})}),null!=n&&(this.currentSel=parseInt(n))}}},function(e,n,t){"use strict";var i=t(4),s=t.n(i),a="",o={},r={COME_MESSAGE:function(e){var n=JSON.parse(e.data);o.comeMessage&&o.comeMessage(n)},SEND_MESSAGE:function(e){var n=s()(e);a.send(n)},OPEN:function(){o.open&&o.open()},TEXT:function(){o.text()}},c={on:function(e,n){o[e]=n},sendMessage:function(e){r.SEND_MESSAGE(e)},connect:function(){a=new WebSocket("ws://"+document.domain+":7272"),a.onopen=r.OPEN,a.onmessage=r.COME_MESSAGE;var e=this;a.onclose=function(){e.connect(),console.log("连接关闭，定时重连")},a.onerror=function(){console.log("出现错误")}}};n.a=c},function(e,n,t){"use strict";var i=function(){this.v=1};i.prototype.getQiniuToken=function(e,n){var t,i;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){4==t.readyState&&n(200==t.status?t.responseText:t.responseText)},i=e,t.open("GET",i,!0),t.send()},i.prototype.Qiniu_upload=function(e,n){var e=e||{key:"",tokenurl:"",f:"",QiniuUrl:""};this.getQiniuToken(e.tokenurl,function(t){var i=new XMLHttpRequest;i.open("POST",e.QiniuUrl,!0);var s;s=new FormData,null!==e.key&&void 0!==e.key&&s.append("key",e.key),s.append("token",t),s.append("file",e.f);i.onreadystatechange=function(e){if(4==i.readyState&&200==i.status&&""!=i.responseText){var t=JSON.parse(i.responseText);return"function"==typeof n&&n(t),!1}if(200!=i.status&&i.responseText){var t=JSON.parse(i.responseText);return"function"==typeof n&&n(t),!1}},i.send(s)})};var s=new i;n.a=s},function(e,n,t){"use strict";n.a=function(e){e.directive("touch",{bind:function(e,n,t){function i(e,n){return 180*Math.atan2(n,e)/Math.PI}function s(e,n,t,s){var a=n-s,o=t-e,r=0;if(Math.abs(o)<2&&Math.abs(a)<2)return r;var c=i(o,a);return c>=-45&&c<45?r="swiperight":c>=45&&c<135?r="swipeup":c>=-135&&c<-45?r="swipedown":(c>=135&&c<=180||c>=-180&&c<-135)&&(r="swipeleft"),r}var a,o,r=n.arg,c=0,u="";e.addEventListener("touchstart",function(e){a=e.touches[0].pageX,o=e.touches[0].pageY,c=setTimeout(function(){c=0,"press"===r&&n.value()},500)},!1),e.addEventListener("touchmove",function(e){clearTimeout(c),c=0}),e.addEventListener("touchend",function(e){var t,i;switch(t=e.changedTouches[0].pageX,i=e.changedTouches[0].pageY,u=s(a,o,t,i),clearTimeout(c),u){case 0:break;case"swipeup":"swipeup"===r&&n.value();break;case"swipedown":"swipedown"===r&&n.value();break;case"swipeleft":"swipeleft"===r&&n.value();break;case"swiperight":"swiperight"===r&&(console.log(n.value),n.value())}},!1)}})}},function(e,n,t){"use strict";var i=function(e,n,t){var i=window.Notification||window.mozNotification||window.webkitNotification;if(i&&"granted"===i.permission){var s=new i(e,{icon:t,body:n});s.onclick=function(){},s.onerror=function(){},s.onshow=function(){setTimeout(s.close.bind(s),3e3)},s.onclose=function(){}}else{if(!i||"denied"===i.permission)return!1;i.requestPermission(function(t){if(i.permission!==t&&(i.permission=t),"granted"!==t)return!1;var s=new i(e,{icon:"http://www.omso2o.com/chat/images/header.jpg",body:n});s.onclick=function(){},s.onerror=function(){},s.onshow=function(){},s.onclose=function(){}})}};n.a=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),s=t(18),a=t.n(s),o=t(17);i.a.config.productionTip=!0,new i.a({el:"#chat-app",template:"<App/>",components:{App:a.a},store:o.a})},function(e,n,t){"use strict";var i=(t(3),t(32)),s=function(){var e=document.createElement("audio");e.src="/omsIm/source/layui/css/modules/layim/voice/default.wav",e.play()},a={complete:!1,onlineMan:0,onlineList:[]},o={SELF_LOGIN:function(e,n){for(var t in n)-1===e.onlineList.indexOf(t)&&(e.onlineMan++,e.onlineList.push(t));e.onlineMan--,e.complete=!0},LOGIN:function(e){e.onlineMan++},SAYUID:function(e,n){console.log(n)},LOGOUT:function(e){e.onlineMan--}},r={selfLogin:function(e,n){e.state;(0,e.commit)("SELF_LOGIN",n.data.client_list)},login:function(e,n){e.state;return(0,e.commit)("LOGIN"),!1},logout:function(e,n){var t=e.state,i=e.commit;t.onlineList.forEach(function(e,i){e==n.from_uid_id&&t.onlineList.splice(i,1)}),i("LOGOUT")},ping:function(e){},say_uid:function(e,n){var a=(e.state,e.commit),o=(e.rootState,void 0),r=void 0,c=void 0,u=void 0,m=void 0;"message"==n.mestype?(c=n.accept_name,o=n.accept_name,u=n.card_image,m=n.card_image,r=n.sender_id):(u=n.card_image,m="/chat/images/ren.png",c=n.group_name,o=n.accept_name,r=n.session_no);var l={id:n.id,content:n.message_content,senderId:n.sender_id,dialogueId:r,sessionName:c,name:o,sessionImg:m,img:u,type:n.mestype};l.code=n.code,l.msg=n.msg,s(),t.i(i.a)("聊天消息",n.message_content,m),a("SEND_MESSAGE",l)},mesClose:function(e){},resSayUid:function(e,n){var t=(e.state,e.commit),i=e.rootState,s=void 0,a=void 0,o=void 0,r=void 0;"message"==n.mestype?(a=i.currentSession.name,s=i.currentSession.img,o=i.currentSession.name,r=i.currentSession.img):"groupMessage"==n.mestype&&(a=n.group_name,s="/chat/images/ren.png",o=i.currentSession.name,r=i.currentSession.img);var c={id:n.id,content:n.message_content,senderId:n.sender_id,dialogueId:i.currentSession.id,name:o,sessionName:a,sessionImg:s,img:r,type:n.mestype};c.code=n.code,c.msg=n.msg,t("SEND_MESSAGE",c)}},c={state:a,actions:r,mutations:o};n.a=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADb0lEQVRYR8VXXVLTYBQ9N2UGpnmwPGiL0w51BcAKgEcNjmUF1hWAK6CswLIC6wooI9VHYAXWFVimHU31gTJjGRhNrnPz1y9pmlApQ546SXq/8517vnNPCA980QOvj6kAfP5RKFsW1olQDgG3eQCyz4zir/a0G0oFcHKRy11dLeyAuQLQatICzDwgoqaWwf7zJbNzGzCJAI57+V0w9ogo5xRjvgRwClBop0woE7ABYFlZtJHVr99uLg4GSUBiAciuh8OFQ6+oLHxkg+ovS+ZpUjGvRTUStogeCSMM2k763xgAh/Lh/IlH9zlgVabtrVPj90IThHUXsLU2qcYYgONevk2gFQZ/1fWbjTQKkxg57hUaBLx2tWFvxoEIAWh1CzUQ9maxuA/MBwFw2yj216KAAwBO//7yF1dwkym7jbLVd9yWLohoRaBvjKLZUJ8HAETxBHoH8IFR7O9Ou1DS+5++P6mwrR3GsaACcHo/y92roFrd/EBOhpbBM9UjAgCtXoHlD0bRDOlCWsPA8osl80wtmHTftqxcVHCtbuFUToXN2FSPZRgA48womWIozhXWxag1k+5/7BY2NMKJa1rYN0pmza/lCzyqgwgDYaVGCgbgJt0f6chxzSOj1K/cHoDXo2gLnGPEKNtATaUu7r5rQPMN15rtqtqG9BZ4PbpvEUbrqy2oAnjPwIetoim/Z3YFx5D5iIkGmQxq/kkIAHj0deSozJqFVq8go3lZhOk67WiToSOnmFE7q99s3mUOjFkx40ybQ9W28E1mw1apvyjvjA2jVjffBNErca27ggjmAPOlNkerQrvPhi/22HE8HM6fuq6IDmBt/884DvKEhBiyN/waviNOBCC0eIGkLqPUoUmzt188/dlMU6UbSHgHjKqXokJ5Qp5LCwCcG0XTyZWJkazVy9cBkoKOqzluBl6B5kUyCaMa5Zg5RyAxHSWs8kFWv6mpOgraq7hkMgAvH4BZ0k05LZTKzgBuahmqR0OpYsXnWf161Qd2OwAe9xJUCFQHh2M5Ew8AutD166O4kzPaeVgP6S3wGYgZLjEe780gSc2jixn7MqBc8GF7TgXgDB3wLsiuJZ0EV1y8C1cHajRXkISno/8g9cMkTflxz1u9x84HTFb/05Hh5PhKZDzfK4AoKJkFlqUN4r4P7oWBaVh7cAD/AEs9Hz/qVD98AAAAAElFTkSuQmCC"},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABU0lEQVRYR+1X203EMBDcrQDogBKgg4wbATq4DoAKgA6oJAMdHBVwVHC5ChZtdIny8OUcKSJ82H+RdzaTcTTjVVl56crvlygBkoWZWYycqh4AbGN7UzivDyF8DnE9AiSfROQxQZVKRNAQIXkvIi8icpmAfQDw3tS1BEg6eJ/QoCnZArj1h7IsK1W9SMRWAK5iBAoRYWKTugxA/QEko8d1qleD8/2uAplAViArsLoC1yLyneoDZvYVQrhZzAeOjdwi7xJJtJZKcnO04hToMwC3/HqNwoikf9U5T98B2HXflohzG+4FWZSAmU36uqr+xAgk4EZJOkzDvziCNwB+ZP0jIDnrJxSRNg1zGGUFsgJZgaUUmHUt76bhnGu5mR1CCG3WDK04KdW8iaoW3cHEzF7PzQZH3CY6mAySzS8np9Yo0ZpCH82m8hjAx3D/fw6nKbeKpWp+AchGFzByLeL6AAAAAElFTkSuQmCC"},function(e,n){e.exports="data:image/gif;base64,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"},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC80lEQVRYR7XXjZFNQRAF4LMZyAARsBFYESACRIAIEIEVASJABIgAESACMqC+V9Nb8+6b+7MeU3Vr39070336dJ+emZMcN2625V/+1szJJRZeS3InyYMk5Xi6/GOSd0neJ/m+xfYWABy/SHK3GfyRRMTTqIHyXG3zAHmyBmQNwHmSR83gmyTe1+gG4nGS+22dNYAMxxyAK0k+tIjQyeAmSjsvmONc2qTmXpJfUxQjAL1zyBk5ZgAvhZi7PQUxAmDijSQPk7w+xnO3VuG+akwAcTGmACrn/yLyKfZi4mVL6e57D0DOvjUJVcXPEWCuav90SYYoQ01cr5rqARx8HBhXH/JZBfVzlNcFUBUkX2xcMFAfSE2+RuNZk6Q5fqtoNaJm/C7Z1VqqeT5QjzXm7lgoBio/pzMN5m0SDQi4kiPQfkuX76NBfntF16T9ufWG8wIgCvQyOh3oYqjkaI6KFoHf2HjaDHrXuNALrHyPlIYxPs/q4++F4uOcEws4Ik9gPAwVAO+C4Nj/ztozAlD1dtIDkC8Lp0POUM2ZNmtO3xVL46MU6KIjRRXoHQBG5WQOAFpF72+1UpGimgytpww10jcuIOcaWQE43QJAZD29qFUDX1tDqS24lAHcQc+f0LMHwDc1MMeA74xWxTPunWOsVOGWY4paa2R7KSgAc/kq8Ayr6l5WnCtMVe87ULrp2jZ/UIQWaq2ktTTUgnTI7agxVfTStDQOZLjUiHpDDHNeh45SSJ2aNDL0Lx1aquh3G15RtaUVFxD02QP0g1JD7Z7VG5aiH7ZiC7ZsRlWQ5jozGGpn2hvmABzsuKPt+GKnWskjKuXyMke1xe249K7B/I8DSUlv9kBSAVPErf90JNM59xQydygFQo6pA+JjRilM5+R8r0suHcvlCxObLhgDhP2FRuTkuelY3tvqLybkg40tFxN1VCervZxPga61TPP7C4Z3UUjR6GqGYr2h5Ll6odkCoEADgkaP1IwGqqXMs0melwEwcnj09fwPq13RgZB99AkAAAAASUVORK5CYII="},function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA6ElEQVRYR+2XwQ3CMAxFXydBTAAjsAFsQJkAmADYACYANoBNYAPYgA2KXMVIqJe4iZocYinKxfb/+nESuyKxVYnxEQJT4Ox2Xz4PYAXIHmRC4AWMgLtnQiE8d3HjIHRoFWiAE7AxJDsCaxdvCOu6KoEDsDdkEt9dDgQMnDuuH2DbV4EZICvE5MibvgRCgDW2raOUBNo6yobABZA1pNVArQoMCfyHpQSuiRRYZlMD1pcwxpHldQuKAkWBokBRoChgbctj/AW/lkwHk5vnYBIDXIabBfDW0Uy6oUmMzIYcT+2IDDHxXZNPx18AfFVs1ylQrAAAAABJRU5ErkJggg=="},function(e,n,t){t(69);var i=t(2)(t(23),t(89),"data-v-64ddad67",null);e.exports=i.exports},function(e,n,t){t(70);var i=t(2)(t(24),t(90),"data-v-85197f68",null);e.exports=i.exports},function(e,n,t){t(71),t(72);var i=t(2)(t(25),t(91),"data-v-94df2816",null);e.exports=i.exports},function(e,n,t){t(68);var i=t(2)(t(26),t(88),"data-v-5c061ef4",null);e.exports=i.exports},function(e,n,t){t(73),t(74);var i=t(2)(t(27),t(92),"data-v-c6a57a00",null);e.exports=i.exports},function(e,n,t){t(67);var i=t(2)(t(28),t(87),"data-v-29892104",null);e.exports=i.exports},function(e,n,t){e.exports={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{attrs:{id:"chat-app"}},[e.chatMainShow?e._e():i("div",{staticClass:"chat-min",attrs:{title:"按[esc]键最大化"},on:{click:function(n){e.chatMainShow=!e.chatMainShow}}},[e.mesNum>0?i("i",{staticClass:"mesNum"},[e._v("\n            "+e._s(e.mesNum>99?"99+":e.mesNum)+"\n        ")]):e._e(),e._v(" "),e._m(0)]),e._v(" "),i("transition",{attrs:{name:"show"}},[e.chatMainShow?i("div",{ref:"chatDrop",staticClass:"chat-main",attrs:{id:"chat-main"}},[e.complete?e._e():i("div",{staticClass:"mask"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t(77),alt:""}})])]),e._v(" "),i("div",{staticClass:"term"},[i("menuList")],1),e._v(" "),i("div",{staticClass:"sidebar"},[i("card",{on:{mainShow:function(n){e.mainShow=!1}}}),e._v(" "),i("list",{on:{mainShow:function(n){e.mainShow=!1}}})],1),e._v(" "),i("div",{}),e._v(" "),e.mainShow?e._e():i("div",{staticClass:"main"},[e.iPhone?e._e():i("div",{staticClass:"windowList"},[i("ul",[i("li",{attrs:{title:"按[esc]键最小化 "},on:{click:function(n){n.stopPropagation(),e.chatMainShow=!e.chatMainShow}}},[e._v("X")])])]),e._v(" "),i("message",{on:{mainShow:function(n){e.mainShow=!0}}}),e._v(" "),i("TextAre")],1),e._v(" "),e.mainShow?i("div",{staticClass:"dialog-title"},[i("i",{staticClass:"backSession",on:{click:function(n){n.stopPropagation(),e.chatMainShow=!1}}}),e._v(" "),i("span",{staticClass:"text-left dialogue-title-name"},[e._v("聊天")])]):e._e()]):e._e()])],1)},staticRenderFns:[function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("i",[i("img",{attrs:{src:t(75),alt:""}})])}]}},function(e,n,t){e.exports={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"text-box"},[e.start?i("div",{staticClass:"text"},[e.showMessageLog?i("messagesLog",{attrs:{show:e.showMessageLog},on:{close:function(n){e.showMessageLog=!1}}}):e._e(),e._v(" "),e.sendImgShow?i("sendImg",{attrs:{src:e.sendImgSrcU},on:{close:function(n){e.sendImgShow=!1}}}):e._e(),e._v(" "),i("div",{staticClass:"chat-tool"},[e.emShow?i("div",{staticClass:"emoticon"},[i("ul",{staticClass:"emoticon-list"},e._l(e.emojis,function(n,t){return i("li",{on:{click:function(t){t.stopPropagation(),e.emojiInsert(n)}}},[i("img",{attrs:{src:"/chatStatic/emoji/"+n.num+"@2x.png",title:n.name,alt:""}})])}))]):e._e(),e._v(" "),e.iphoneText?e._e():i("ul",[i("li",{on:{click:function(n){n.stopPropagation(),e.emShow=!e.emShow}}},[i("i",{staticClass:"iconfont-chat"},[e._v("")])]),e._v(" "),i("li",[e._m(0),i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"chat-file"},on:{change:function(n){e.fileUpload(n)}}})]),e._v(" "),i("li",{staticStyle:{float:"right","margin-right":"20px"},attrs:{title:"聊天记录"},on:{click:function(n){e.showMessageLog=!0}}},[i("img",{attrs:{src:t(78),alt:"聊天记录"}})])])]),e._v(" "),e.iphoneText?i("div",{staticClass:"tool-emoji",on:{click:function(n){n.stopPropagation(),e.emShow=!e.emShow}}},[i("i",{staticClass:"iconfont-chat"},[e._v("")])]):e._e(),e._v(" "),i("div",{staticClass:"textarea-box"},[e.iphoneText?e._e():i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"textarea",attrs:{placeholder:""},domProps:{value:e.content},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13))return null;e.onKeydown(n)},paste:function(n){e.pasteOver(n)},drop:function(n){e.dropFile(n)},input:function(n){n.target.composing||(e.content=n.target.value)}}}),e._v(" "),e.iphoneText?i("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"textarea",attrs:{placeholder:"",id:"chat-input"},domProps:{value:e.content},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13))return null;e.onKeydown(n)},paste:function(n){e.pasteOver()},input:function(n){n.target.composing||(e.content=n.target.value)}}}):e._e()]),e._v(" "),i("div",{staticClass:"send-act"},[i("div",{staticClass:"chat-send"},[!e.content&&e.iphoneText?i("label",{staticClass:"mul-function",attrs:{for:"chat-file"}},[i("i",{staticClass:"iconfont-chat"},[e._v("")])]):e._e(),e._v(" "),e.iphoneText?i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"chat-file"},on:{change:function(n){e.fileUpload(n)}}}):e._e(),e._v(" "),e.content||!e.iphoneText?i("span",{staticClass:"send-btn",on:{click:function(n){e.send()}}},[e._v("发送")]):e._e(),e._v(" "),e.iphoneText?e._e():i("div",{staticClass:"send-select-box",on:{click:function(n){n.stopPropagation(),e.selShow=!e.selShow}}},[i("span",{staticClass:"send-select"})]),e._v(" "),e.selShow?i("ul",{ref:"ssl",staticClass:"send-select-list"},[i("li",{class:[1==e.currentSel?"active":""],on:{click:function(n){e.changeSend(1)}}},[e._v("按Enter 键发送")]),e._v(" "),i("li",{class:[1==e.currentSel?"":"active"],on:{click:function(n){e.changeSend(0)}}},[e._v("按Ctrl + Enter 键发送")])]):e._e()])])],1):e._e()])},staticRenderFns:[function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("label",{attrs:{for:"chat-file"}},[i("img",{attrs:{src:t(79),alt:""}})])}]}},function(e,n,t){e.exports={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"menu"},[i("ul",[i("li",{staticClass:"header-img",staticStyle:{position:"relative"},on:{click:function(n){n.stopPropagation(),e.showInfo()}}},[i("img",{attrs:{src:e.user.img,width:"40px",height:"40px",alt:""}}),e._v(" "),e.selfInfo?i("div",{ref:"si",staticClass:"selfInfo"},[i("div",[i("span",[e._v(e._s(e.user.name))])]),e._v(" "),i("div",[i("div",{staticClass:"selfInfo-img"},[i("img",{attrs:{src:"",width:"150",height:"150",src:e.user.img}})])])]):e._e()]),e._v(" "),i("li",{class:{actionColor:1==e.indexTab},on:{click:function(n){e.selectTab(1)}}},[i("i",{staticClass:"iconfont-chat"},[e._v("")])]),e._v(" "),i("li",{class:{actionColor:2==e.indexTab},on:{click:function(n){e.selectTab(2)}}},[i("i",{staticClass:"iconfont-chat"},[e._v("")]),e.newFriendNum?i("span",{staticClass:"newFriend"},[e._v(e._s(e.newFriendNum))]):e._e()]),e._v(" "),i("li",{class:{actionColor:3==e.indexTab},on:{click:function(n){e.selectTab(3)}}},[i("i",{staticClass:"iconfont-chat"},[e._v("")])])]),e._v(" "),i("div",{staticClass:"chat-set",attrs:{title:"设置"}},[i("i",{on:{click:function(n){n.stopPropagation(),e.setShow=!e.setShow}}},[i("img",{attrs:{src:t(76),alt:""}})]),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.setShow?i("ul",{staticClass:"chat-set-list"},[i("li",[i("a",{attrs:{target:"_blank",href:"/chat/new_groupChat.php"}},[e._v("新建群聊")])]),e._v(" "),e._l(e.sets,function(n,t){return i("li",{on:{click:function(n){n.stopPropagation(),e.setUser(t)}}},[e._v(e._s(n[e.userSet[t]]))])})],2):e._e()])],1)])},staticRenderFns:[]}},function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"card"},[e.onlineShow?t("div",{staticClass:"online-man-box"},[t("onlineMan",{on:{close:function(n){e.onlineShow=!1},mainShow:function(n){e.$emit("mainShow")}}})],1):e._e(),e._v(" "),t("div",{staticClass:"online-man",on:{click:function(n){e.onlineShowFun()}}},[t("i",{staticClass:"iconfont-chat"},[e._v("")]),t("span",{staticClass:"online"},[e._v(e._s(e.online)+"人")])]),e._v(" "),t("input",{staticClass:"search",attrs:{type:"text",placeholder:"搜索"},on:{input:e.onKeyup}})])},staticRenderFns:[]}},function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"friend-list"},[t("div",{on:{click:function(n){e.open()}}},[t("i",{staticClass:"iconfont-chat"},[e._v(e._s(e.openFun?"":""))]),e._v(" "),t("p",{staticClass:"list-name"},[e._v(e._s(e.item.groupname))]),e._v(" "),(1==e.item.id?e.newFriendNum:e.item.list.length)?t("span",{class:{newFriendNum:1==e.item.id,friendsNum:1!=e.item.id},attrs:{d:e.item.id}},[e._v(e._s(1==e.item.id?e.newFriendNum:e.item.list.length))]):e._e()]),e._v(" "),e.openFun?t("ul",[e._l(e.item.list,function(n){return t("li",{class:{active:n.id===e.currentId},on:{click:function(t){e.selectSession(n.id,"message",n.username,n.avatar,e.item.id,n)}}},[t("img",{attrs:{src:n.avatar,alt:"",width:"40",height:"40"}}),e._v(" "),t("p",{staticClass:"name",staticStyle:{display:"inline-block","font-size":"18px",margin:"0",width:"125px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v(e._s(n.username))]),e._v(" "),1==n.state?t("i",{staticClass:"friendNew"}):e._e(),e._v(" "),1==e.item.id?t("span",{staticClass:"friendApply"},[e._v(e._s(1==n.state?"等待验证":"好友申请"))]):e._e()])}),e._v(" "),0==e.item.list.length?t("li",[e._v("没有数据！")]):e._e()],2):e._e()])},staticRenderFns:[]}},function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"list"},[e.friendApplyShow?t("div",{staticClass:"friendApply-box"},[t("friendApply",{attrs:{applyerId:e.friendApplyId,friendsApplyState:e.friendsApplyState},on:{friendApplyClose:function(n){e.friendApplyShow=!1}}})],1):e._e(),e._v(" "),e.mousedownShow?t("div",{ref:"recentContactsDel",staticClass:"rcDel"},[t("ul",[t("li",{on:{click:function(n){e.removeZjlxr()}}},[e._v("移除该会话")])])]):e._e(),e._v(" "),e.filterKey?t("div",{staticClass:"search"},[e._l(e.searchFriend,function(n){return t("div",{},[n.list.length?t("div",[t("p",{staticClass:"search-list-name"},[e._v(e._s(n.name))]),e._v(" "),n.list.length?t("ul",{staticClass:"search-list"},e._l(n.list,function(i){return n.list?t("li",{class:{active:i.id===e.currentId},on:{click:function(t){e.searchSelectSession(i.id,"message",i.username,i.avatar,n.name)}}},[t("div",{staticClass:"icon-avatar"},[t("img",{staticClass:"avatar",attrs:{width:"40",height:"40",alt:i.username,src:""+i.avatar}})]),e._v(" "),t("div",[t("p",{staticClass:"name"},[e._v(e._s(i.username))])])]):e._e()})):e._e()]):e._e()])}),e._v(" "),e.searchGroup.length?t("ul",{staticClass:"list-item"},e._l(e.searchGroup,function(n){return t("li",{on:{click:function(t){e.selectSession(n.id,"groupMessage",n.groupname,n.avatar)}}},[t("img",{staticClass:"avatar",attrs:{width:"40",height:"40",alt:n.groupname,src:""+n.avatar}}),e._v(" "),t("p",{staticClass:"name"},[e._v(e._s(n.groupname))])])})):e._e()],2):e._e(),e._v(" "),1==e.indexTab?t("div",{attrs:{id:"zjlxr-box"}},[t("ul",{directives:[{name:"oncontextmenu",rawName:"v-oncontextmenu",value:e.sessions,expression:"sessions"}],staticClass:"list-item",attrs:{id:"zjlxr"}},[e.sessions.length<=0?t("li",{staticStyle:{"text-align":"center"}},[e._v("还没有最近联系人！")]):e._e(),e._v(" "),e._l(e.sessions,function(n,i){return t("li",{class:{active:n.id===e.currentId},on:{click:function(t){e.selectSession(n.id,n.type,n.user.name,n.user.img)},mousedown:function(t){if(!("button"in t)&&3!==t.keyCode)return null;e.mousedown(n,i,t)}}},[t("div",{staticClass:"list-info"},[t("div",{staticClass:"icon-avatar"},[t("img",{staticClass:"avatar",attrs:{width:"48",height:"48",alt:n.user.name,src:n.user.img}})]),e._v(" "),t("div",{staticClass:"list-text"},[t("div",{staticClass:"list-time"},[n.messages.length>0?t("span",{staticClass:"list-message-name"},[e._v(e._s(e._f("time")(n.messages[n.messages.length-1].date)))]):e._e()]),e._v(" "),t("div",{staticClass:"list-name"},[t("p",{staticClass:"name"},[e._v(e._s(n.user.name))])]),e._v(" "),n.messages.length>0?t("div",{staticClass:"list-message"},[t("span",{staticClass:"list-message-name"},[e._v(e._s(n.messages[n.messages.length-1].self||"message"==n.type?"":n.messages[n.messages.length-1].name+":"))]),e._v(" "),t("span",[e._v(e._s(e._f("content")(n.messages[n.messages.length-1].content)))])]):e._e()])]),e._v(" "),n.messageNum?t("span",{staticClass:"message-num"},[e._v(e._s(n.messageNum))]):e._e()])})],2)]):e._e(),e._v(" "),2==e.indexTab?t("div",{staticClass:"friend-list-box"},[t("ul",{staticClass:"friend-list list-item"},e._l(e.friends,function(n,i){return t("li",{staticClass:"chat-friend-list"},[t("friends-list",{attrs:{item:n},on:{fmainShow:function(n){e.$emit("mainShow")},friendsApple:e.friendApply}})],1)}))]):e._e(),e._v(" "),3==e.indexTab?t("div",{staticClass:"group-list-box"},[t("ul",{staticClass:"group-list list-item"},e._l(e.group,function(n){return t("li",{on:{click:function(t){e.selectSession(n.id,"groupMessage",n.groupname,""+n.avatar)}}},[t("img",{staticClass:"avatar",attrs:{src:""+n.avatar,width:"40",height:"40"}}),e._v(" "),t("p",{staticClass:"name"},[e._v(e._s(n.groupname))])])}))]):e._e()])},staticRenderFns:[]}},function(e,n){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"message"},[t("transition",{attrs:{name:"slide-groupMan"}},[e.groupManShow?t("div",{staticClass:"groupMan"},[t("groupMan")],1):e._e()]),e._v(" "),e.persInfo?t("persInfo",{on:{close:function(n){e.persInfo=!1}}}):e._e(),e._v(" "),e.showImg?t("imgFd",{attrs:{imgSrc:e.imgfdBoxinfo},on:{close:function(n){e.showImg=!1}}}):e._e(),e._v(" "),e.showMessageLog?t("messagesLog",{attrs:{show:e.showMessageLog},on:{close:function(n){e.showMessageLog=!1}}}):e._e(),e._v(" "),t("div",{directives:[{name:"chat-drop",rawName:"v-chat-drop"}],staticClass:"dialog-title"},[t("i",{staticClass:"backSession",on:{click:function(n){e.clearSession()}}}),e._v(" "),t("span",{staticClass:"text-left dialogue-title-name"},[e._v(e._s(e.dialogName))]),e._v(" "),e.dialogName?t("i",{staticClass:"iconfont-chat man-info",attrs:{class:"iconfont-chat man-info"},on:{click:function(n){n.stopPropagation(),e.userInfo()}}},[e._v("")]):e._e()]),e._v(" "),e.session?t("ul",{directives:[{name:"scroll-bottom",rawName:"v-scroll-bottom",value:e.session.messages,expression:"session.messages"}]},[e.session.messages.length>20?t("li",{staticClass:"catMul",on:{click:function(n){e.showMessageLog=!0}}},[e._v("查看更多")]):e._e(),e._v(" "),e._l(e.session.messages,function(n){return t("li",[t("p",{staticClass:"time"},[t("span",[e._v(e._s(e._f("time")(n.date)))])]),e._v(" "),t("div",{staticClass:"main",class:{self:n.self}},[t("img",{staticClass:"avatar",attrs:{width:"40",height:"40",src:n.self?e.user.img:n.img},on:{click:function(t){e.appoint(n.name)}}}),e._v(" "),"groupMessage"!=e.dialogType||n.self?e._e():t("div",{staticClass:"groupName"},[e._v(e._s(n.name))]),e._v(" "),t("div",{staticClass:"text",domProps:{innerHTML:e._s(e.content(n.content))},on:{click:function(n){e.imgFd(n)}}})])])})],2):e._e()],1)},staticRenderFns:[]}},,,function(e,n){},,,function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA7klEQVRYR8XX2w3CMAwFUHsDNqFsBJvBJLABjMIGRpZSKaqA+HGd9qcfjXpPnMppmHa+eOd8ggNE5EBEdyLS+4mZ3/8mCQV04UsLVcBrCuBL+I2Zz6MlhlQgGq64NCATngZkw1MARHgYgAoPAZDhbgA63AWoCDcDqsI9AG2nx9bVTB1u1AHX58NGJCLa158V4aYKbABXZr5YZ2cZN6yAvkRE+iWAIqwA3dsf3XcAQ5gArQolCDOgCuECVCDcADQiBEAiwgAUIgVAINKALAICyCBggB+IeQeTdeNp/w7atrVzLlOPZpbdbzsGugQRwAer+YwhngFifgAAAABJRU5ErkJggg=="}],[33]);